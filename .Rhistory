# Install the ggplot2 package
install.packages('ggplot2')
# Check to see if it loads properly
library(ggplot2)
ggplot(mtcars, aes(hp, mpg)) + geom_point()
2+2
2+2
comment
2+2
*comment
2+2
/comment
2+2
number <- 10
number
words <- "Hello World"
number2 = 12
number2
number = 12
number <- 10
# Create numeric vector
numeric_vector <- c(1, 2, 3)
# Create character vector
character_vector <- c('Albania', 'Botswana', 'Cambodia')
# Create numeric vector
fruits <- c(1, 1, 2)
# Create character vector for factor labels
fruit_names <- c('apples', 'mangos')
# Create character vector for factor labels
fruit_names <- c('apples', 'mangos')
# Convert to labelled factor
fruits_factor <- factor(fruits, labels = fruit_names)
summary(fruits_factor)
# Create numeric vector
fruits <- c(1, 1, 2)
# Create character vector for factor labels
fruit_names <- c('apples', 'mangos')
# Convert to labelled factor
fruits_factor <- factor(fruits, labels = fruit_names)
summary(fruits_factor)
# Create numeric vector
fruits <- c(1, 1, 2, 2, NA)
# Create character vector for factor labels
fruit_names <- c('apples', 'mangos')
# Convert to labelled factor
fruits_factor <- factor(fruits, labels = fruit_names)
summary(fruits_factor)
# Create numeric vector
fruits <- c(3, 3, 2, 2, NA)
# Create character vector for factor labels
fruit_names <- c('apples', 'mangos')
# Convert to labelled factor
fruits_factor <- factor(fruits, labels = fruit_names)
summary(fruits_factor)
# Create numeric vector
fruits <- c(3, 3, 2, NA)
# Create character vector for factor labels
fruit_names <- c('apples', 'mangos')
# Convert to labelled factor
fruits_factor <- factor(fruits, labels = fruit_names)
summary(fruits_factor)
data(swiss)
library("foreign", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
install.packages("ggplot2")
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
install.packages("ggplot2")
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
data(swiss)
?swiss
boxplot(swiss$Examination, main = '% of Draftees with Highest Mark')
var(swiss$Examination)
sd(swiss$Examination)
sd_error <- function(x) {
sd(x) / sqrt(length(x))
}
sd_error(swiss$Examination)
hist(swiss$Education, main = '')
log(swiss$Education) %>% hist(main = "Swiss Education")
log(swiss$Education) %>% hist(main = "Swiss Education")
library("magrittr", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
detach("package:magrittr", unload=TRUE)
library("magrittr", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
detach("package:magrittr", unload=TRUE)
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
library(ggplot2)
log(swiss$Education) %>% hist(main = "Swiss Education")
data(swiss)
log(swiss$Education) %>% hist(main = "Swiss Education")
log(swiss$Education) %>% hist(main = "Swiss Education")
install.packages("ggplot2")
log(swiss$Education) %>% hist(main = "Swiss Education")
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
install.packages("dplyr")
log(swiss$Education) %>% hist(main = "Swiss Education")
#Packages used:
library(dplyr)
library(rio)
library(ggplot2)
library(vcdExtra)
#Database selection
data(infert)
names (infert)
#We have decided to work on the "Infertile dataset", which is about the infertility after spontaneous and induced abortion.
#The database includes 248 variables and 8 observations.
#I. OVERLOOK OF THE DATASET
head(infert)
tail(infert)
#Type of data object and it's dimensions
class(infert)                   #Its a "data.frame"
#two ways to the numbers of rows
nrow(infert)                    #Number of rows=248
length(infert[ ,1])
#two ways to the numbers of columns
ncol(infert)                  #Number of columns=8
length(infert)
str(infert)                 #Overview of the data
identify(infert)
library(rvest)
library(dplyr)
URL <- 'http://news.bbc.co.uk/2/hi/uk_news/politics/8044207.stm'
# Get and parse expenses_table from the webpage
ExpensesTable <- URL %>% read_html() %>%
html_nodes('#expenses_table') %>%
html_table() %>%
as.data.frame
install.packages("rvest")
library(rvest)
# Get and parse expenses_table from the webpage
ExpensesTable <- URL %>% read_html() %>%
html_nodes('#expenses_table') %>%
html_table() %>%
as.data.frame
View(ExpensesTable)
View(ExpensesTable)
base <- c("cat16_24", "25_34cat", "35_44catch",
"45_54Cat", "55_4fat$", 'colour', 'color')
## Find only all 'cat' regardles of case
grep('cat', base, ignore.case = T)
# Find only 'cat' at the end of the string with $
grep('cat$', base)
# Find only 'cat' at the begining of the string with ^
grep('^cat', base)
# Find zero or one of the preceeding character with ?
grep('colou?r', base)
URL2 <- 'http://www.bbc.com/sport/winter-olympics/2014/medals/countries'
ExpensesTable <- URL2 %>% read_html() %>%
html_nodes('#module-table') %>%
html_table() %>%
as.data.frame
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#module-table') %>%
html_table() %>%
as.data.frame
View(MedalTable)
View(MedalTable)
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#module/medal-table') %>%
html_table() %>%
as.data.frame
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#medal-table') %>%
html_table() %>%
as.data.frame
URL2 <- 'http://www.bbc.com/sport/winter-olympics/2014/medals/countries'
# Get and parse expenses_table from the webpage
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#medal-table') %>%
html_table() %>%
as.data.frame
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#winter_olympics_2014_medals_table_by_country') %>%
html_table() %>%
as.data.frame
URL2 <- 'http://www.bbc.com/sport/winter-olympics/2014/medals/countries'
# Get and parse expenses_table from the webpage
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#winter_olympics_2014_medals_table_by_country') %>%
html_table() %>%
as.data.frame
URL2 <- 'http://www.bbc.com/sport/winter-olympics/2014/medals/countries'
# Get and parse expenses_table from the webpage
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#medals-table_table') %>%
html_table() %>%
as.data.frame
URL2 <- 'http://www.bbc.com/sport/winter-olympics/2014/medals/countries'
# Get and parse expenses_table from the webpage
MedalTable <- URL2 %>% read_html() %>%
html_nodes('#table') %>%
html_table() %>%
as.data.frame
URL2 <- 'http://www.bbc.com/sport/winter-olympics/2014/medals/countries'
# Get and parse expenses_table from the webpage
MedalTable <- URL2 %>% read_html() %>%
html_nodes('table') %>%
html_table() %>%
as.data.frame
View(MedalTable)
View(MedalTable)
names(MedalTabe) <- c("rank","country","gold", "silver", "bronze", "total", "Link")
names(MedalTable) <- c("rank","country","gold", "silver", "bronze", "total", "Link")
View(MedalTable)
View(MedalTable)
remove(MedalTable$Link)
MedalTable$Link <- NULL
MedalTable2 <- MedalTable[order(total)]
MedalTable2 <- MedalTable[order(MedalTable$total)]
descending <- arrange(MedalTable desc(total))
descending <- arrange(MedalTable, desc(total))
View(descending)
View(descending)
MedalTable <- arrange(MedalTable, desc(total))
View(MedalTable)
View(MedalTable)
remove(descending)
MedalTable <- arrange(MedalTable, desc(rank))
View(MedalTable)
View(MedalTable)
MedalTable <- arrange(MedalTable, asc(rank))
MedalTable <- arrange(MedalTable, ascending(rank))
MedalTable <- arrange(MedalTable, asce(rank))
?arrange
MedalTable <- arrange(MedalTable, (rank))
library(stargazer)
library(gmodels)
# Set working directory
#setwd("~/Documents/CDA/collaborative_projects/Final_Project_P-P")
setwd("~/R_data/Final_Project_P-P") # Staender
# Load the data set
load("data/data_sets/data_final.rda")
# Create a variable for partner's income
z$othinccat <- trunc(z$def_othinc/10000)
z$othinccat[is.na(z$othinc)] <- -1
table(z$othinccat)
z$rinccat <- trunc(z$def_rinc/10000)
z$rinccat[is.na(z$def_rinc)] <- -1
table(z$rinccat)
z$inccat <- trunc(z$def_inc/10000)
z$inccat[is.na(z$def_inc)] <- -1
table(z$inccat)
# Create career1
z$career1 <- z$rinc > z$p50
z$career1 <- as.numeric(z$career1)
z$career1[is.na(z$career1)] <- 0
# Create spouse work categories
z$spouse_work <- NULL
z$spouse_work[z$spwrksta==1] <- 1
z$spouse_work[z$spwrksta==2] <- 2
z$spouse_work[z$spwrksta==7] <- 7
z$spouse_ft <- NULL
z$spouse_ft[z$spwrksta==1] <- 1
z$spouse_ft[z$spwrksta==2 | z$spwrksta==7] <- 0
z$spouse_pt <- NULL
z$spouse_pt[z$spwrksta==2] <- 1
z$spouse_pt[z$spwrksta==1 | z$spwrksta==7] <- 0
z$spouse_home <- NULL
z$spouse_home[z$spwrksta==7] <- 1
z$spouse_home[z$spwrksta==1 | z$spwrksta==2] <- 0
z$sp_nonft <- NULL
z$sp_nonft[z$spwrksta==1] <- 0
z$sp_nonft[z$spwrksta==7 | z$spwrksta==2] <- 1
z$nonft <- NULL
z$nonft[z$wrksta==1] <- 0
z$nonft[z$wrksta==7 | z$wrksta==2] <- 1
z$sp_hardw <- NULL
z$sp_hardw[z$sphrs1>=50] <- 1
z$sp_hardw[z$sphrs1<50] <- 0
z$sp_hardw <- as.numeric(z$sp_hardw)
z$hardw <- NULL
z$hardw[z$hrs1 >= 50] <- 1
z$hardw[z$hrs1 < 50] <- 0
z$hardw <- as.numeric(z$hardw)
##Marriage happiness
z$hapmarr <- NA
z$hapmarr[z$hapmar==3] <- 1
z$hapmarr[z$hapmar==2] <- 2
z$hapmarr[z$hapmar==1] <- 3
z$hapmar <- NULL
z <- rename(z, c(hapmarr="hapmar"))
z$vhapmar <- NA
z$vhapmar[z$hapmar==1 | z$hapmar==2] <- 0
z$vhapmar[z$hapmar==3] <- 1
# work hours into bins
z$hrs_cat <- trunc(z$hrs1/10)
z$sphrs_cat <- trunc(z$sphrs1/10)
z$hrs_ft <- NULL
z$hrs_ft[z$hrs1<40] <- 0
z$hrs_ft[z$hrs1>=40] <- 1
z$sphrs_ft <- NULL
z$sphrs_ft[z$sphrs1<40] <- 0
z$sphrs_ft[z$sphrs1>=40] <- 1
z$working_ft <- as.numeric(z$working_ft)
###############
# table specific variables
###############
z$sexcat <- NULL
z$sexcat[z$sex==1] <- "Male"
z$sexcat[z$sex==2] <- "Female"
z$spwrkcat <- NULL
z$spwrkcat[z$spwrksta==1] <- "Full-time"
z$spwrkcat[z$spwrksta==2] <- "Part-time"
z$spwrkcat[z$spwrksta==7] <- "Keeping house"
z$hrscat <- NULL
z$hrscat[z$hrs_cat==0] <- "0-9"
z$hrscat[z$hrs_cat==1] <- "10-19"
z$hrscat[z$hrs_cat==2] <- "20-29"
z$hrscat[z$hrs_cat==3] <- "30-39"
z$hrscat[z$hrs_cat==4] <- "40-49"
z$hrscat[z$hrs_cat==5] <- "50-59"
z$hrscat[z$hrs_cat==6] <- "60-69"
z$hrscat[z$hrs_cat==7] <- "70-79"
z$hrscat[z$hrs_cat==8] <- "80+"
z$sphrscat <- NULL
z$sphrscat[z$sphrs_cat==0] <- "0-9"
z$sphrscat[z$sphrs_cat==1] <- "10-19"
z$sphrscat[z$sphrs_cat==2] <- "20-29"
z$sphrscat[z$sphrs_cat==3] <- "30-39"
z$sphrscat[z$sphrs_cat==4] <- "40-49"
z$sphrscat[z$sphrs_cat==5] <- "50-59"
z$sphrscat[z$sphrs_cat==6] <- "60-69"
z$sphrscat[z$sphrs_cat==7] <- "70-79"
z$sphrscat[z$sphrs_cat==8] <- "80+"
z$income_status[z$career==1] <- "High-income"
z$income_status[z$career==0] <- "Low-income"
z$incstat[z$career1==1] <- "High-income"
z$incstat[z$career1==0] <- "Low-income"
z$speducat <- NULL
z$speducat[z$speduc<12] <- 1
z$speducat[z$speduc==12] <- 2
z$speducat[z$speduc>12 & z$educ<16] <- 3
z$speducat[z$speduc>=16] <- 4
# Data-set "t" is limited to the years where "career" is defined
z = z[z$year >= 1977 & z$year < 2012,]
ge_sp_edu <- table(z$sexcat[z$married==1], z$incstat[z$married==1], z$speducat[z$married==1])
ftable(prop.table(ge_sp_edu,c(1,2)))
summary(ge_sp_edu)
z$speducat <- NULL
z$speducat[z$speduc<12] <- "Less than highschool"
z$speducat[z$speduc==12] <- "Highschool"
z$speducat[z$speduc>12 & z$educ<16] <- "Between 12 to 16 years"
z$speducat[z$speduc>=16] <- "College educated"
ge_sp_edu <- table(z$sexcat[z$married==1], z$incstat[z$married==1], z$speducat[z$married==1])
ftable(prop.table(ge_sp_edu,c(1,2)))
z$speducat <- NULL
z$speducat[z$speduc<12] <- "(1) less 12 years"
z$speducat[z$speduc==12] <- "(2) Highschool"
z$speducat[z$speduc>12 & z$educ<16] <- "(3) 12 to 16 years"
z$speducat[z$speduc>=16] <- "(4) College educated"
ge_sp_edu <- table(z$sexcat[z$married==1], z$incstat[z$married==1], z$speducat[z$married==1])
ftable(prop.table(ge_sp_edu,c(1,2)))
z$income_status1 <- NULL
z$income_status1[z$career1==1] <- "High-income"
z$income_status1[z$career1==0] <- "Low-income"
ge_sp_edu <- table(z$sexcat[z$married==1], z$incstat[z$married==1], z$speducat[z$married==1])
ftable(prop.table(ge_sp_edu,c(1,2)))
ge_sp_edu <- table(z$sexcat[z$married==1], z$income_status1[z$married==1], z$speducat[z$married==1])
ftable(prop.table(ge_sp_edu,c(1,2)))
tab_prob1 <- ftable(prop.table(ge_sp_edu,c(1,2)))
table(tab_prob1)
ge_sp_ca <- table(z$sexcat[z$educat==4 & z$married==1], z$incstat[z$educat==4 & z$married==1], z$spwrkcat[z$educat==4 & z$married==1])
ftable(prop.table(ge_sp_ca, c(1,2)))
ge_sp_edu <- table(z$sexcat[z$educat==4 & z$married==1], z$income_status1[z$educat==4 & z$married==1], z$speducat[z$educat==4 & z$married==1])
ftable(prop.table(ge_sp_edu,c(1,2)))
ftable(ge_sp_edu)
ftable(ge_sp_ca)
ge_sp_ca <- table(z$sexcat[z$educat==4 & z$married==1], z$income_status1[z$educat==4 & z$married==1], z$spwrkcat[z$educat==4 & z$married==1])
ftable(prop.table(ge_sp_ca, c(1,2)))
ftable(ge_sp_ca)
ge_sp_ca2 <- table(z$sexcat[z$educat==4 & z$married==1], z$income_status[z$educat==4 & z$married==1], z$spwrkcat[z$educat==4 & z$married==1])
ftable(prop.table(ge_sp_ca2, c(1,2)))
ftable(ge_sp_ca2)
# Gender and spouse education
ge_speducat <- table(z$sexcat[z$married==1], z$speducat[z$married==1])
prop.table(ge_speducat, 1)
ge_speducat <- table(z$sexcat[z$educat==4 & z$married==1], z$speducat[z$educat==4 & z$married==1])
prop.table(ge_speducat, 1)
ge_sp_ca1 <- table(z$sexcat[z$educat==4 & z$married==1],
z$income_status[z$educat==4 & z$married==1],
z$spwrkcat[z$educat==4 & z$married==1])
ftable(prop.table(ge_sp_ca1, c(1,2)))
setwd("~/R_data/Final_Project_P-P")
install.packages("rmarkdown", type = "source")
